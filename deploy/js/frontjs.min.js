!function(){var e,t,n,r;!function(){var o={},i={};e=function(e,t,n){o[e]={deps:t,callback:n}},r=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),r=e.split("/").slice(0,-1),o=0,i=n.length;i>o;o++){var u=n[o];if(".."===u)r.pop();else{if("."===u)continue;r.push(u)}}return r.join("/")}if(r._eak_seen=o,i[e])return i[e];if(i[e]={},!o[e])throw new Error("Could not find module "+e);for(var u,a=o[e],l=a.deps,c=a.callback,f=[],s=0,d=l.length;d>s;s++)f.push("exports"===l[s]?u={}:t(n(l[s])));var v=c.apply(this,f);return i[e]=u||v}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){i(e,t)}}function i(e,n){a[e]=n,0===--l&&t(a)}var u,a=[],l=e.length;0===l&&t([]);for(var c=0;c<e.length;c++)u=e[c],u&&o(u.then)?u.then(r(c),n):i(c,u)})}var r=e.isArray,o=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(o)}}function n(){var e=0,t=new l(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function r(){return function(){c.setTimeout(o,1)}}function o(){for(var e=0;e<f.length;e++){var t=f[e],n=t[0],r=t[1];n(r)}f=[]}function i(e,t){var n=f.push([e,t]);1===n&&u()}var u,a="undefined"!=typeof window?window:{},l=a.MutationObserver||a.WebKitMutationObserver,c="undefined"!=typeof global?global:void 0===this?window:this,f=[];u="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():l?n():r(),e.asap=i}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:void(n[e]=t)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){"use strict";function r(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=o)}var o=e.Promise,i=t.isFunction;n.polyfill=r}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,o,i,u,a){"use strict";function l(e){if(!S(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function n(e){h(t,e)}function r(e){g(t,e)}try{e(n,r)}catch(o){r(o)}}function f(e,t,n,r){var o,i,u,a,l=S(n);if(l)try{o=n(r),u=!0}catch(c){a=!0,i=c}else o=r,u=!0;v(t,o)||(l&&u?h(t,o):a?g(t,i):e===N?h(t,o):e===D&&g(t,o))}function s(e,t,n,r){var o=e._subscribers,i=o.length;o[i]=t,o[i+N]=n,o[i+D]=r}function d(e,t){for(var n,r,o=e._subscribers,i=e._detail,u=0;u<o.length;u+=3)n=o[u],r=o[u+t],f(t,n,r,i);e._subscribers=null}function v(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(w(t)&&(r=t.then,S(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?h(e,r):p(e,r)))},function(t){return n?!0:(n=!0,void g(e,t))}),!0}catch(o){return n?!0:(g(e,o),!0)}return!1}function h(e,t){e===t?p(e,t):v(e,t)||p(e,t)}function p(e,t){e._state===k&&(e._state=A,e._detail=t,b.async(y,e))}function g(e,t){e._state===k&&(e._state=A,e._detail=t,b.async(m,e))}function y(e){d(e,e._state=N)}function m(e){d(e,e._state=D)}var b=e.config,w=(e.configure,t.objectOrFunction),S=t.isFunction,E=(t.now,n.all),_=r.race,I=o.resolve,x=i.reject,O=u.asap;b.async=O;var k=void 0,A=0,N=1,D=2;l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var o=arguments;b.async(function(){f(n._state,r,o[n._state-1],n._detail)})}else s(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},l.all=E,l.race=_,l.resolve=I,l.reject=x,a.Promise=l}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,o=0;o<e.length;o++)r=e[o],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var r=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=r,e.now=o}),t("promise/polyfill").polyfill()}(),function(){"use strict";function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=E.BlobBuilder||E.MSBlobBuilder||E.MozBlobBuilder||E.WebKitBlobBuilder,o=new r,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function t(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=l;e instanceof ArrayBuffer?(r=e,i+=f):(r=e.buffer,"[object Int8Array]"===n?i+=d:"[object Uint8Array]"===n?i+=v:"[object Uint8ClampedArray]"===n?i+=h:"[object Int16Array]"===n?i+=p:"[object Uint16Array]"===n?i+=y:"[object Int32Array]"===n?i+=g:"[object Uint32Array]"===n?i+=m:"[object Float32Array]"===n?i+=b:"[object Float64Array]"===n?i+=w:t(new Error("Failed to get type for BinaryArray"))),t(i+o(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=u+e.type+"~"+o(this.result);t(l+s+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),t(null,c)}}function n(t){if(t.substring(0,c)!==l)return JSON.parse(t);var n,o=t.substring(S),i=t.substring(c,S);if(i===s&&a.test(o)){var u=o.match(a);n=u[1],o=o.substring(u[0].length)}var E=r(o);switch(i){case f:return E;case s:return e([E],{type:n});case d:return new Int8Array(E);case v:return new Uint8Array(E);case h:return new Uint8ClampedArray(E);case p:return new Int16Array(E);case y:return new Uint16Array(E);case g:return new Int32Array(E);case m:return new Uint32Array(E);case b:return new Float32Array(E);case w:return new Float64Array(E);default:throw new Error("Unkown type: "+i)}}function r(e){var t,n,r,o,u,a=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),s=new Uint8Array(f);for(t=0;l>t;t+=4)n=i.indexOf(e[t]),r=i.indexOf(e[t+1]),o=i.indexOf(e[t+2]),u=i.indexOf(e[t+3]),s[c++]=n<<2|r>>4,s[c++]=(15&r)<<4|o>>2,s[c++]=(3&o)<<6|63&u;return f}function o(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=i[n[t]>>2],r+=i[(3&n[t])<<4|n[t+1]>>4],r+=i[(15&n[t+1])<<2|n[t+2]>>6],r+=i[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="~~local_forage_type~",a=/^~~local_forage_type~([^~]+)~/,l="__lfsc__:",c=l.length,f="arbf",s="blob",d="si08",v="ui08",h="uic8",p="si16",g="si32",y="ur16",m="ui32",b="fl32",w="fl64",S=c+f.length,E=this,_={serialize:t,deserialize:n,stringToBuffer:r,bufferToString:o};"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports=_:"function"==typeof define&&define.amd?define("localforageSerializer",function(){return _}):this.localforageSerializer=_}.call(window),function(){"use strict";function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,o=new r,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function t(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n}function n(e){return new m(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){return 4===r.readyState?200===r.status?t({response:r.response,type:r.getResponseHeader("Content-Type")}):void n({status:r.status,response:r.response}):void 0},r.send()})}function r(t){return new m(function(r,o){var i=e([""],{type:"image/png"}),u=t.transaction([S],"readwrite");u.objectStore(S).put(i,"key"),u.oncomplete=function(){var e=t.transaction([S],"readwrite"),i=e.objectStore(S).get("key");i.onerror=o,i.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);n(o).then(function(e){r(!(!e||"image/png"!==e.type))},function(){r(!1)}).then(function(){URL.revokeObjectURL(o)})}}})["catch"](function(){return!1})}function o(e){return"boolean"==typeof w?m.resolve(w):r(e).then(function(e){return w=e})}function i(e){return new m(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function u(n){var r=t(atob(n.data));return e([r],{type:n.type})}function a(e){return e&&e.__local_forage_encoded_blob}function l(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];return new m(function(e,r){var o=b.open(n.name,n.version);o.onerror=function(){r(o.error)},o.onupgradeneeded=function(e){o.result.createObjectStore(n.storeName),e.oldVersion<=1&&o.result.createObjectStore(S)},o.onsuccess=function(){n.db=o.result,t._dbInfo=n,e()}})}function c(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),l=i.get(e);l.onsuccess=function(){var e=l.result;void 0===e&&(e=null),a(e)&&(e=u(e)),t(e)},l.onerror=function(){r(l.error)}})["catch"](r)});return y(r,t),r}function f(e,t){var n=this,r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),l=i.openCursor(),c=1;l.onsuccess=function(){var n=l.result;if(n){var r=n.value;a(r)&&(r=u(r));var o=e(r,n.key,c++);void 0!==o?t(o):n["continue"]()}else t()},l.onerror=function(){r(l.error)}})["catch"](r)});return y(r,t),r}function s(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var u=new m(function(n,u){var a;r.ready().then(function(){return a=r._dbInfo,o(a.db)}).then(function(e){return!e&&t instanceof Blob?i(t):t}).then(function(t){var r=a.db.transaction(a.storeName,"readwrite"),o=r.objectStore(a.storeName);null===t&&(t=void 0);var i=o.put(t,e);r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=i.error?i.error:i.transaction.error;u(e)}})["catch"](u)});return y(u,n),u}function d(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),u=i.objectStore(o.storeName),a=u["delete"](e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}})["catch"](r)});return y(r,t),r}function v(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),u=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=u.error?u.error:u.transaction.error;n(e)}})["catch"](n)});return y(n,e),n}function h(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}})["catch"](n)});return y(n,e),n}function p(e,t){var n=this,r=new m(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),u=!1,a=i.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===e?t(n.key):u?t(n.key):(u=!0,n.advance(e))):void t(null)},a.onerror=function(){r(a.error)}})["catch"](r)});return y(r,t),r}function g(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),u=[];i.onsuccess=function(){var t=i.result;return t?(u.push(t.key),void t["continue"]()):void e(u)},i.onerror=function(){n(i.error)}})["catch"](n)});return y(n,e),n}function y(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var m="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,b=b||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(b){var w,S="local-forage-detect-blob-support",E={_driver:"asyncStorage",_initStorage:l,iterate:f,getItem:c,setItem:s,removeItem:d,clear:v,length:h,key:p,keys:g};"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports=E:"function"==typeof define&&define.amd?define("asyncStorage",function(){return E}):this.asyncStorage=E}}.call(window),function(){"use strict";function e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];n.keyPrefix=n.name+"/",t._dbInfo=n;var o=new f(function(e){g===p.DEFINE?require(["localforageSerializer"],e):e(g===p.EXPORT?require("./../utils/serializer"):s.localforageSerializer)});return o.then(function(e){return d=e,f.resolve()})}function t(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=v.length-1;n>=0;n--){var r=v.key(n);0===r.indexOf(e)&&v.removeItem(r)}});return c(n,e),n}function n(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=v.getItem(t.keyPrefix+e);return r&&(r=d.deserialize(r)),r});return c(r,t),r}function r(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo.keyPrefix,r=t.length,o=v.length,i=0;o>i;i++){var u=v.key(i),a=v.getItem(u);if(a&&(a=d.deserialize(a)),a=e(a,u.substring(r),i+1),void 0!==a)return a}});return c(r,t),r}function o(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=v.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return c(r,t),r}function i(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=v.length,r=[],o=0;n>o;o++)0===v.key(o).indexOf(e.keyPrefix)&&r.push(v.key(o).substring(e.keyPrefix.length));return r});return c(n,e),n}function u(e){var t=this,n=t.keys().then(function(e){return e.length});return c(n,e),n}function a(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;v.removeItem(t.keyPrefix+e)});return c(r,t),r}function l(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new f(function(o,i){d.serialize(t,function(t,u){if(u)i(u);else try{var a=r._dbInfo;v.setItem(a.keyPrefix+e,t),o(n)}catch(l){("QuotaExceededError"===l.name||"NS_ERROR_DOM_QUOTA_REACHED"===l.name)&&i(l),i(l)}})})});return c(o,n),o}function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var f="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,s=this,d=null,v=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;v=this.localStorage}catch(h){return}var p={DEFINE:1,EXPORT:2,WINDOW:3},g=p.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?g=p.EXPORT:"function"==typeof define&&define.amd&&(g=p.DEFINE);var y={_driver:"localStorageWrapper",_initStorage:e,iterate:r,getItem:n,setItem:l,removeItem:a,clear:t,length:u,key:o,keys:i};g===p.EXPORT?module.exports=y:g===p.DEFINE?define("localStorageWrapper",function(){return y}):this.localStorageWrapper=y}.call(window),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new f(function(e){p===h.DEFINE?require(["localforageSerializer"],e):e(p===h.EXPORT?require("./../utils/serializer"):s.localforageSerializer)}),i=new f(function(r,o){try{n.db=v(n.name,String(n.version),n.description,n.size)}catch(i){return t.setDriver(t.LOCALSTORAGE).then(function(){return t._initStorage(e)}).then(r)["catch"](o)}n.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,r()},function(e,t){o(t)})})});return o.then(function(e){return d=e,i})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new f(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=d.deserialize(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function n(e,t){var n=this,r=new f(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var o=r.rows,i=o.length,u=0;i>u;u++){var a=o.item(u),l=a.value;if(l&&(l=d.deserialize(l)),l=e(l,a.key,u+1),void 0!==l)return void t(l)}t()},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function r(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new f(function(n,o){r.ready().then(function(){void 0===t&&(t=null);var i=t;d.serialize(t,function(t,u){if(u)o(u);else{var a=r._dbInfo;a.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(i)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})}})})["catch"](o)});return c(o,n),o}function o(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new f(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function i(e){var t=this,n=new f(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function u(e){var t=this,n=new f(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function a(e,t){var n=this,r=new f(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function l(e){var t=this,n=new f(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var f="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,s=this,d=null,v=this.openDatabase;if(v){var h={DEFINE:1,EXPORT:2,WINDOW:3},p=h.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?p=h.EXPORT:"function"==typeof define&&define.amd&&(p=h.DEFINE);var g={_driver:"webSQLStorage",_initStorage:e,iterate:n,getItem:t,setItem:r,removeItem:o,clear:i,length:u,key:a,keys:l};p===h.DEFINE?define("webSQLStorage",function(){return g}):p===h.EXPORT?module.exports=g:this.webSQLStorage=g}}.call(window),function(){"use strict";function e(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function t(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=v(t[n])?t[n].slice():t[n])}return arguments[0]}function n(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t]===e)return!0;return!1}function r(n){this._config=t({},f,n),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var r=0;r<l.length;r++)e(this,l[r]);this.setDriver(this._config.driver)}var o="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,i={},u={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},a=[u.INDEXEDDB,u.WEBSQL,u.LOCALSTORAGE],l=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],c={DEFINE:1,EXPORT:2,WINDOW:3},f={description:"",driver:a.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},s=c.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?s=c.EXPORT:"function"==typeof define&&define.amd&&(s=c.DEFINE);var d=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[u.WEBSQL]=!!e.openDatabase,n[u.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[u.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=this;r.prototype.INDEXEDDB=u.INDEXEDDB,r.prototype.LOCALSTORAGE=u.LOCALSTORAGE,r.prototype.WEBSQL=u.WEBSQL,r.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},r.prototype.defineDriver=function(e,t,r){var u=new o(function(t,r){try{var u=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),c=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(a);if(n(e._driver))return void r(c);for(var f=l.concat("_initStorage"),s=0;s<f.length;s++){var v=f[s];if(!v||!e[v]||"function"!=typeof e[v])return void r(a)}var h=o.resolve(!0);"_support"in e&&(h=e._support&&"function"==typeof e._support?e._support():o.resolve(!!e._support)),h.then(function(n){d[u]=n,i[u]=e,t()},r)}catch(p){r(p)}});return u.then(t,r),u},r.prototype.driver=function(){return this._driver||null},r.prototype.ready=function(e){var t=this,n=new o(function(e,n){t._driverSet.then(function(){null===t._ready&&(t._ready=t._initStorage(t._config)),t._ready.then(e,n)})["catch"](n)});return n.then(e,e),n},r.prototype.setDriver=function(e,t,r){function u(){a._config.driver=a.driver()}var a=this;return"string"==typeof e&&(e=[e]),this._driverSet=new o(function(t,r){var u=a._getFirstSupportedDriver(e),l=new Error("No available storage method found.");if(!u)return a._driverSet=o.reject(l),void r(l);if(a._dbInfo=null,a._ready=null,n(u)){var f=new o(function(e){if(s===c.DEFINE)require([u],e);else if(s===c.EXPORT)switch(u){case a.INDEXEDDB:e(require("./drivers/indexeddb"));break;case a.LOCALSTORAGE:e(require("./drivers/localstorage"));break;case a.WEBSQL:e(require("./drivers/websql"))}else e(h[u])});f.then(function(e){a._extend(e),t()})}else i[u]?(a._extend(i[u]),t()):(a._driverSet=o.reject(l),r(l))}),this._driverSet.then(u,u),this._driverSet.then(t,r),this._driverSet},r.prototype.supports=function(e){return!!d[e]},r.prototype._extend=function(e){t(this,e)},r.prototype._getFirstSupportedDriver=function(e){if(e&&v(e))for(var t=0;t<e.length;t++){var n=e[t];if(this.supports(n))return n}return null},r.prototype.createInstance=function(e){return new r(e)};var p=new r;s===c.DEFINE?define("localforage",function(){return p}):s===c.EXPORT?module.exports=p:this.localforage=p}.call(window);var Front={ref:null,model:{is:function(e,t){var n=Front,r=this;return"string"==typeof e?null!=r.get(e):t?null!=r.context(e):""!=n.attribute(e,"model")},context:function(e){var t=Front,n=this,r=e;for("string"==typeof e&&(r=n.get(e));null!=r;){var o=t.attribute(r,"model");if(""!=o)return r;r=r.parentNode}return null},watch:function(e,t){var n=Front,r=n.find("model",e);null!=r&&(r.watch=null==t?!0:t)},get:function(e){var t=Front;return t.find("model",e)},data:function(e,t){var n=Front,r=this;if(null!=t){var o=r.get(e);if(null==o)return;for(var i in t){var u=n.find("view",i,o);r.value(u,t[i])}return t}var a={};return n.traverse(n.root,function(t){if(null!=t){var o=t.getAttribute("model");null!=o&&o==e&&n.traverse(t,function(e){if(e!=t){var n=e.getAttribute("view");if(null!=n){var o=e.nodeName.toLowerCase();if(null!=o&&"#text"!=o){var i=("input"==o?null==e.type?"":e.type.toLowerCase():"",r.value(e));a[n]=i}}}})}}),a},value:function(e,t){var n=Front,r=e;if("string"==typeof r&&(r=n.view.get(r),null==r))return null;var o=r.nodeName.toLowerCase();if(null==o)return t;if("#text"==o)return t;var i="input"==o?null==r.type?"":r.type.toLowerCase():"";switch(o){case"input":switch(i){case"checkbox":return null==t?r.checked:r.checked=t;default:return null==t?r.value:r.value=t}break;case"select":return null==t?r.selectedIndex:r.selectedIndex=t;case"textarea":return null==t?r.value:r.value=t;default:return null==t?r.textContent:r.textContent=t}return t},onevent:function(e,t){for(var n=Front,r=this,o=t;null!=o;){var i=n.attribute(o,"model");if(""!=i&&null!=i&&null!=o.watch&&o.watch){var u=r.data(i);n.controller.dispatch("model",o,u)}o=o.parentNode}},attribute:function(e){return Front.attribute(e,"model")},storage:{get:function(e,t,n){var r=Front,o=r.controller,i=t,u=n;r.storage.get(e,function(e,t){null!=t?o.notify(i+".error","storage.get",r.model,t):o.notify(i+".get","storage",r.model,null==u?e:[e,u])})},set:function(e,t,n,r){var o=Front,i=o.controller,u=n,a=r;o.storage.set(e,t,function(e,t){null!=t?i.notify(u+".error","storage.set",o.model,t):i.notify(u+".set","storage",o.model,null==a?e:[e,a])})},remove:function(e,t,n){var r=Front,o=r.controller,i=t,u=n;r.storage.remove(e,function(e,t){null!=t?o.notify(i+".error","storage.remove",r.model,t):o.notify(i+".remove","storage",r.model,null==u?e:[e,u])})},key:function(e,t,n){var r=Front,o=r.controller,i=t,u=n;r.storage.key(p_key,function(e,t){null!=t?o.notify(i+".error","storage.key",r.model,t):o.notify(i+".key","storage",r.model,null==u?e:[e,u])})},keys:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.keys(function(e,t){null!=t?r.notify(o+".error","storage.keys",n.model,t):r.notify(o+".keys","storage",n.model,null==i?e:[e,i])})},clear:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.clear(function(e,t){null!=t?r.notify(o+".error","storage.count",n.model,t):r.notify(o+".count","storage",n.model,null==i?e:[e,i])})},length:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.length(function(e,t){null!=t?r.notify(o+".error","storage.length",n.model,t):r.notify(o+".length","storage",n.model,null==i?e:[e,i])})},destroy:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.length(function(e){null!=e?r.notify(o+".error","storage.length",n.model,e):r.notify(o+".length","storage",n.model,i)})}}},controller:{list:[],add:function(e,t){var n=this,r=e;return n.list.indexOf(r)<0&&n.list.push(r),r.route=null==r.route?null==t?/(.*?)/:t:r.route,null==r.allow&&(r.allow=""),r},remove:function(e){var t=this,n=e,r=t.list.indexOf(n);return r>=0?(t.list.splice(r,1),n):null},exists:function(e){var t=this;return null!=t.find(e)},find:function(e){for(var t=this,n=0;n<t.list.length;n++)if(null!=t.list[n].name&&t.list[n].name==e)return t.list[n];return null},dispatch:function(e,t,n){var r=Front,o=this,i=r.view.path(t,!0);o.notify(i,e,t,n),"input,change,update".indexOf(e)>=0&&r.traverse(r.root,function(e){var t=r.attribute(e,"bind");if(""!=t){var n=t.split("."),o=n.pop(),i=n.join(".");if(r.model.is(i)){var u=r.model.data(i);null!=u[o]&&r.model.value(e,u[o])}}})},notify:function(e,t,n,r){for(var o=this,i=0;i<o.list.length;i++){var u=o.list[i];if(null!=u.on){if(null!=u.allow&&""!=u.allow&&u.allow.indexOf(t)<0)continue;if(""!=e&&!u.route.test(e))continue;u.on(e,t,n,r)}}},request:{service:"",create:function(e,t,n,r,o,i){var u=null==i?"get":i,a=null==o?!1:o,l=Front.controller,c=Front,f={};if(f.path=t,f.event=null==n?"":n,f.data=null==r?{}:r,"get"==u){var s="?notification="+JSON.stringify(f);e+=s}var d=c.request.create(e,function(n,r,o,i){if(0>=r&&l.notify(t+".upload","progress",o,1+r),r>=0&&1>=r&&l.notify(t+".progress","progress",o,r),r>=1)if(null==n)l.notify(t+".error","error",o,i);else if(l.notify(t+".complete","complete",o,o.response),!a){var u=JSON.parse(o.response);if(null==u)return void console.error("Controller> Service ["+e+"] returned a wrong notification list.");for(var c=0;c<u.length;c++){var f=u[c];null==f.path?console.error("Controller> Service ["+e+"] returned a wrong notification format."):(f.event=null==f.event?"":f.event,f.data=null==f.data?{}:f.data,l.notify(f.path,f.event,o,f.data))}}},JSON.stringify(f),a,u);return d},get:function(e,t,n,r,o){var i=this;return i.create(e,t,n,r,o,"get")},post:function(e,t,n,r,o){var i=this;return i.create(e,t,n,r,o,"post")},notify:function(e,t,n,r,o){var i=this,u=null==o?"post":o;return i.create(i.service,e,t,n,r,u)}},clear:function(){var e=this;e.list=[]}},view:{is:function(e,t){var n=Front,r=this;return"string"==typeof e?null!=r.get(e):t?null!=r.context(e):""!=n.attribute(e,"view")},context:function(e){for(var t=Front,n=e;null!=n;){var r=t.attribute(n,"view");if(""!=r)return n;n=n.parentNode}return null},path:function(e,t){var n=[],r="",o=null==t?!1:t,i=e;if(r=null!=i.getAttribute?i.getAttribute("view"):"",!o){if(null==r)return"";if(""==r)return""}for(null!=r&&""!=r&&n.push(r),i=i.parentNode;null!=i;)r=null!=i.getAttribute?i.getAttribute("view"):"",null!=r&&""!=r&&n.push(r),i=i.parentNode;return n.reverse(),n.join(".")},get:function(e){if(null==e)return null;var t=Front,n=e.split(".");if(n.length<=0)return null;n.reverse();var r=null;return t.traverse(t.root,function(e){if(n.length<=0)return!1;var o=t.attribute(e,"view");if(""!=o)return o==n[n.length-1]&&n.pop(),n.length<=0?(r=e,!1):void 0}),r},find:function(e,t){var n=null==t?!1:t,r=Front,o=n?[]:null;return r.traverse(r.root,function(t){var i=r.attribute(t,"view");if(""!=i&&i==e){if(!n){if(null==o)return o=t,!1;if(null!=o)return!1}o.push(t)}}),o},clone:function(e){var t=this,n=null;if("string"==typeof e){var r=t.get(e);if(null==r)return null;if(null==r.getAttribute)return null;if(null==r.getAttribute("template"))return null;n=r}else n=e;return n=n.cloneNode(!0),n.removeAttribute("template"),n},parent:function(e){var t=this;if(null==e)return null;if("string"==typeof e){var n=p_path.split(".");n.pop();var r=n.join(".");return t.get(r)}for(var o=e.parentNode;null!=o;){if(Front.view.is(o))return o;o=o.parentNode}return null
},attribute:function(e){return Front.attribute(e,"view")}},observer:null,mutations:[],events:["click","input","change"],root:null,enabled:!0,setRoot:function(e){if(null!=ref.root){for(var t=0;t<ref.events.length;t++)ref.listen(ref.events[t],!1);ref.observer.disconnect()}if(ref.root=e,null!=ref.root){for(var t=0;t<ref.events.length;t++)ref.listen(ref.events[t],!0);var n={attributes:!0,childList:!0,characterData:!0,subtree:!0};ref.observer.observe(ref.root,n);var r=document.styleSheets[0];r.insertRule("*[template] { display: none !important; }",1)}},listen:function(e,t){if(null!=ref.root){var n=ref.root,r=t?n.addEventListener:n.removeEventListener,o="focus,blur".indexOf(e)>=0&&t;o&&r(e,ref.onevent,!0),r(e,ref.onevent)}},onevent:function(e){if(ref.enabled){var t=e.target,n=e.type;switch(n){case"change":case"input":ref.model.onevent(n,t)}ref.controller.dispatch(n,t,e)}},initialize:function(e,t){ref=this,ref.events=null==t?ref.events:t,ref.root=e,null==MutationObserver?console.warn("FrontJS> MutationObserver class not found."):ref.observer=new MutationObserver(ref.onmutation),null==ref.root&&(null==document.body?window.addEventListener("load",ref.onload):ref.root=document.body),null!=ref.root&&(console.log("FrontJS> Initialize ["+ref.root+"]"),ref.setRoot(ref.root))},onload:function(){window.removeEventListener("load",ref.onload),null==ref.root&&(ref.root=document.body,console.log("FrontJS> Initialize ["+ref.root+"]"),ref.setRoot(ref.root))},attribute:function(e,t){if(null==e)return"";if(null==e.getAttribute)return"";var n=e.getAttribute(t);return null==n?"":n},find:function(e,t,n){var r=null,o=null==n?ref.root:n;return ref.traverse(o,function(n){if(null!=r)return!1;if(null!=n.getAttribute){var o=n.getAttribute(e);if(null!=o&&""!=o)return null==t?(r=n,!1):""==t?(r=n,!1):o==t?(r=n,!1):void 0}}),r},onmutation:function(e){if(ref.enabled){ref.mutations=e;for(var t=0;t<ref.mutations.length;t++){var n=ref.mutations[t].target;ref.model.onevent("update",n)}ref.controller.dispatch("update",document.body)}},traverse:function(e,t){var n=null;if(n=t(e),0!=n)for(var r=e.children,o=0;o<r.length;o++)ref.traverse(r[o],t)},request:{create:function(e,t,n,r,o){var i=null==o?"get":o,u=null==r?!1:r,a=new XMLHttpRequest;return null!=a.overrideMimeType&&a.overrideMimeType(u?"application/octet-stream":"text/plain"),a.onprogress=function(e){var n=.9999*(e.total<=0?0:e.loaded/(e.total+5));null!=t&&t(null,n,a)},a.upload.onprogress=function(e){if(null!=n){var r=.9999*(e.total<=0?0:e.loaded/(e.total+5));null!=t&&t(null,-(1-r),a)}},a.onload=function(){null!=t&&t(a.response,1,a)},a.onerror=function(e){null!=t&&t(null,1,a,e)},a.open(i,e,!0),null!=n?a.send(n):a.send(),a},get:function(e,t,n,r){var o=this,i=n;if(null!=i){var u="?",a=[];for(var l in i)a.push(l+"="+i[l]);for(var c=0;c<a.length;c++)u+=a[c],c<a.length-1&&(u+="&");e+=u}return o.create(e,t,null,r,"get")},post:function(e,t,n,r){var o=this;return o.create(e,t,n,r,"post")}},storage:{context:"fjs",database:"frontjs",init:function(e){var t=this;null!=e&&(t.database=e),localforage.config({driver:localforage.INDEXEDDB,name:t.database})},get:function(e,t){var n=this,r=""==n.context?"":n.context+".";localforage.getItem(r+e,function(e,n){null!=e&&(n=null),null!=t&&t(n,e)})},set:function(e,t,n){var r=this,o=""==r.context?"":r.context+".";return localforage.setItem(o+e,t,function(e,t){null!=n&&n(t,e)}),t},remove:function(e,t){var n=this,r=""==n.context?"":n.context+".";localforage.removeItem(r+e,function(e,n){null!=t&&t(n,e)})},key:function(e,t){var n=this;localforage.key(e,function(e,r){null!=e&&(r=""),""!=n.context&&(r=r.replace(n.context+".","")),null!=t&&t(r,e)})},keys:function(e){var t=this;localforage.keys(function(n,r){null!=n&&(r=[]);var o=[];if(""!=t.context)for(var i=0;i<r.length;i++)0==r[i].indexOf(t.context)&&o.push(r[i].replace(t.context+".",""));else o=r;null!=e&&e(o,n)})},clear:function(e){var t=this;t.keys(function(n,r){for(var o=n.length,i=o;n.length>0;)t.remove(n.pop(),function(){i--,0>=i&&null!=e&&e(o,r)})})},length:function(e){var t=this;t.keys(function(t,n){var r=null==n?t.length:0;null!=e&&e(r,n)})},iterate:function(e){localforage.iterate(function(t,n,r){var o=null;return null!=e&&(o=e(n,t,r)),null!=o?o:void 0},function(){null!=e&&e(k,v,-1)})},destroy:function(e){localforage.clear(function(t){null!=e&&e(t)})}}};