!function(){var e,t,n,r;!function(){var o={},i={};e=function(e,t,n){o[e]={deps:t,callback:n}},r=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),r=e.split("/").slice(0,-1),o=0,i=n.length;i>o;o++){var a=n[o];if(".."===a)r.pop();else{if("."===a)continue;r.push(a)}}return r.join("/")}if(r._eak_seen=o,i[e])return i[e];if(i[e]={},!o[e])throw new Error("Could not find module "+e);for(var a,u=o[e],l=u.deps,s=u.callback,c=[],f=0,d=l.length;d>f;f++)c.push("exports"===l[f]?a={}:t(n(l[f])));var v=s.apply(this,c);return i[e]=a||v}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){i(e,t)}}function i(e,n){u[e]=n,0===--l&&t(u)}var a,u=[],l=e.length;0===l&&t([]);for(var s=0;s<e.length;s++)a=e[s],a&&o(a.then)?a.then(r(s),n):i(s,a)})}var r=e.isArray,o=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(o)}}function n(){var e=0,t=new l(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function r(){return function(){s.setTimeout(o,1)}}function o(){for(var e=0;e<c.length;e++){var t=c[e],n=t[0],r=t[1];n(r)}c=[]}function i(e,t){var n=c.push([e,t]);1===n&&a()}var a,u="undefined"!=typeof window?window:{},l=u.MutationObserver||u.WebKitMutationObserver,s="undefined"!=typeof global?global:void 0===this?window:this,c=[];a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():l?n():r(),e.asap=i}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:void(n[e]=t)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){"use strict";function r(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=o)}var o=e.Promise,i=t.isFunction;n.polyfill=r}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,o,i,a,u){"use strict";function l(e){if(!_(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],s(e,this)}function s(e,t){function n(e){p(t,e)}function r(e){y(t,e)}try{e(n,r)}catch(o){r(o)}}function c(e,t,n,r){var o,i,a,u,l=_(n);if(l)try{o=n(r),a=!0}catch(s){u=!0,i=s}else o=r,a=!0;v(t,o)||(l&&a?p(t,o):u?y(t,i):e===F?p(t,o):e===N&&y(t,o))}function f(e,t,n,r){var o=e._subscribers,i=o.length;o[i]=t,o[i+F]=n,o[i+N]=r}function d(e,t){for(var n,r,o=e._subscribers,i=e._detail,a=0;a<o.length;a+=3)n=o[a],r=o[a+t],c(t,n,r,i);e._subscribers=null}function v(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(w(t)&&(r=t.then,_(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?p(e,r):h(e,r)))},function(t){return n?!0:(n=!0,void y(e,t))}),!0}catch(o){return n?!0:(y(e,o),!0)}return!1}function p(e,t){e===t?h(e,t):v(e,t)||h(e,t)}function h(e,t){e._state===O&&(e._state=k,e._detail=t,b.async(g,e))}function y(e,t){e._state===O&&(e._state=k,e._detail=t,b.async(m,e))}function g(e){d(e,e._state=F)}function m(e){d(e,e._state=N)}var b=e.config,w=(e.configure,t.objectOrFunction),_=t.isFunction,I=(t.now,n.all),A=r.race,S=o.resolve,E=i.reject,x=a.asap;b.async=x;var O=void 0,k=0,F=1,N=2;l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var o=arguments;b.async(function(){c(n._state,r,o[n._state-1],n._detail)})}else f(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},l.all=I,l.race=A,l.resolve=S,l.reject=E,u.Promise=l}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,o=0;o<e.length;o++)r=e[o],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var r=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=r,e.now=o}),t("promise/polyfill").polyfill()}(),function(){"use strict";function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=I.BlobBuilder||I.MSBlobBuilder||I.MozBlobBuilder||I.WebKitBlobBuilder,o=new r,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function t(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=l;e instanceof ArrayBuffer?(r=e,i+=c):(r=e.buffer,"[object Int8Array]"===n?i+=d:"[object Uint8Array]"===n?i+=v:"[object Uint8ClampedArray]"===n?i+=p:"[object Int16Array]"===n?i+=h:"[object Uint16Array]"===n?i+=g:"[object Int32Array]"===n?i+=y:"[object Uint32Array]"===n?i+=m:"[object Float32Array]"===n?i+=b:"[object Float64Array]"===n?i+=w:t(new Error("Failed to get type for BinaryArray"))),t(i+o(r))}else if("[object Blob]"===n){var u=new FileReader;u.onload=function(){var n=a+e.type+"~"+o(this.result);t(l+f+n)},u.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),t(null,s)}}function n(t){if(t.substring(0,s)!==l)return JSON.parse(t);var n,o=t.substring(_),i=t.substring(s,_);if(i===f&&u.test(o)){var a=o.match(u);n=a[1],o=o.substring(a[0].length)}var I=r(o);switch(i){case c:return I;case f:return e([I],{type:n});case d:return new Int8Array(I);case v:return new Uint8Array(I);case p:return new Uint8ClampedArray(I);case h:return new Int16Array(I);case g:return new Uint16Array(I);case y:return new Int32Array(I);case m:return new Uint32Array(I);case b:return new Float32Array(I);case w:return new Float64Array(I);default:throw new Error("Unkown type: "+i)}}function r(e){var t,n,r,o,a,u=.75*e.length,l=e.length,s=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var c=new ArrayBuffer(u),f=new Uint8Array(c);for(t=0;l>t;t+=4)n=i.indexOf(e[t]),r=i.indexOf(e[t+1]),o=i.indexOf(e[t+2]),a=i.indexOf(e[t+3]),f[s++]=n<<2|r>>4,f[s++]=(15&r)<<4|o>>2,f[s++]=(3&o)<<6|63&a;return c}function o(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=i[n[t]>>2],r+=i[(3&n[t])<<4|n[t+1]>>4],r+=i[(15&n[t+1])<<2|n[t+2]>>6],r+=i[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="~~local_forage_type~",u=/^~~local_forage_type~([^~]+)~/,l="__lfsc__:",s=l.length,c="arbf",f="blob",d="si08",v="ui08",p="uic8",h="si16",y="si32",g="ur16",m="ui32",b="fl32",w="fl64",_=s+c.length,I=this,A={serialize:t,deserialize:n,stringToBuffer:r,bufferToString:o};"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports=A:"function"==typeof define&&define.amd?define("localforageSerializer",function(){return A}):this.localforageSerializer=A}.call(window),function(){"use strict";function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,o=new r,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function t(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;t>o;o++)r[o]=e.charCodeAt(o);return n}function n(e){return new m(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){return 4===r.readyState?200===r.status?t({response:r.response,type:r.getResponseHeader("Content-Type")}):void n({status:r.status,response:r.response}):void 0},r.send()})}function r(t){return new m(function(r,o){var i=e([""],{type:"image/png"}),a=t.transaction([_],"readwrite");a.objectStore(_).put(i,"key"),a.oncomplete=function(){var e=t.transaction([_],"readwrite"),i=e.objectStore(_).get("key");i.onerror=o,i.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);n(o).then(function(e){r(!(!e||"image/png"!==e.type))},function(){r(!1)}).then(function(){URL.revokeObjectURL(o)})}}})["catch"](function(){return!1})}function o(e){return"boolean"==typeof w?m.resolve(w):r(e).then(function(e){return w=e})}function i(e){return new m(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function a(n){var r=t(atob(n.data));return e([r],{type:n.type})}function u(e){return e&&e.__local_forage_encoded_blob}function l(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];return new m(function(e,r){var o=b.open(n.name,n.version);o.onerror=function(){r(o.error)},o.onupgradeneeded=function(e){o.result.createObjectStore(n.storeName),e.oldVersion<=1&&o.result.createObjectStore(_)},o.onsuccess=function(){n.db=o.result,t._dbInfo=n,e()}})}function s(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),l=i.get(e);l.onsuccess=function(){var e=l.result;void 0===e&&(e=null),u(e)&&(e=a(e)),t(e)},l.onerror=function(){r(l.error)}})["catch"](r)});return g(r,t),r}function c(e,t){var n=this,r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),l=i.openCursor(),s=1;l.onsuccess=function(){var n=l.result;if(n){var r=n.value;u(r)&&(r=a(r));var o=e(r,n.key,s++);void 0!==o?t(o):n["continue"]()}else t()},l.onerror=function(){r(l.error)}})["catch"](r)});return g(r,t),r}function f(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var a=new m(function(n,a){var u;r.ready().then(function(){return u=r._dbInfo,o(u.db)}).then(function(e){return!e&&t instanceof Blob?i(t):t}).then(function(t){var r=u.db.transaction(u.storeName,"readwrite"),o=r.objectStore(u.storeName);null===t&&(t=void 0);var i=o.put(t,e);r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=i.error?i.error:i.transaction.error;a(e)}})["catch"](a)});return g(a,n),a}function d(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new m(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),u=a["delete"](e);i.oncomplete=function(){t()},i.onerror=function(){r(u.error)},i.onabort=function(){var e=u.error?u.error:u.transaction.error;r(e)}})["catch"](r)});return g(r,t),r}function v(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}})["catch"](n)});return g(n,e),n}function p(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}})["catch"](n)});return g(n,e),n}function h(e,t){var n=this,r=new m(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,u=i.openCursor();u.onsuccess=function(){var n=u.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},u.onerror=function(){r(u.error)}})["catch"](r)});return g(r,t),r}function y(e){var t=this,n=new m(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;return t?(a.push(t.key),void t["continue"]()):void e(a)},i.onerror=function(){n(i.error)}})["catch"](n)});return g(n,e),n}function g(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var m="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,b=b||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(b){var w,_="local-forage-detect-blob-support",I={_driver:"asyncStorage",_initStorage:l,iterate:c,getItem:s,setItem:f,removeItem:d,clear:v,length:p,key:h,keys:y};"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?module.exports=I:"function"==typeof define&&define.amd?define("asyncStorage",function(){return I}):this.asyncStorage=I}}.call(window),function(){"use strict";function e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];n.keyPrefix=n.name+"/",t._dbInfo=n;var o=new c(function(e){y===h.DEFINE?require(["localforageSerializer"],e):e(y===h.EXPORT?require("./../utils/serializer"):f.localforageSerializer)});return o.then(function(e){return d=e,c.resolve()})}function t(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=v.length-1;n>=0;n--){var r=v.key(n);0===r.indexOf(e)&&v.removeItem(r)}});return s(n,e),n}function n(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=v.getItem(t.keyPrefix+e);return r&&(r=d.deserialize(r)),r});return s(r,t),r}function r(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo.keyPrefix,r=t.length,o=v.length,i=0;o>i;i++){var a=v.key(i),u=v.getItem(a);if(u&&(u=d.deserialize(u)),u=e(u,a.substring(r),i+1),void 0!==u)return u}});return s(r,t),r}function o(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=v.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return s(r,t),r}function i(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=v.length,r=[],o=0;n>o;o++)0===v.key(o).indexOf(e.keyPrefix)&&r.push(v.key(o).substring(e.keyPrefix.length));return r});return s(n,e),n}function a(e){var t=this,n=t.keys().then(function(e){return e.length});return s(n,e),n}function u(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;v.removeItem(t.keyPrefix+e)});return s(r,t),r}function l(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new c(function(o,i){d.serialize(t,function(t,a){if(a)i(a);else try{var u=r._dbInfo;v.setItem(u.keyPrefix+e,t),o(n)}catch(l){("QuotaExceededError"===l.name||"NS_ERROR_DOM_QUOTA_REACHED"===l.name)&&i(l),i(l)}})})});return s(o,n),o}function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var c="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,f=this,d=null,v=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;v=this.localStorage}catch(p){return}var h={DEFINE:1,EXPORT:2,WINDOW:3},y=h.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?y=h.EXPORT:"function"==typeof define&&define.amd&&(y=h.DEFINE);var g={_driver:"localStorageWrapper",_initStorage:e,iterate:r,getItem:n,setItem:l,removeItem:u,clear:t,length:a,key:o,keys:i};y===h.EXPORT?module.exports=g:y===h.DEFINE?define("localStorageWrapper",function(){return g}):this.localStorageWrapper=g}.call(window),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new c(function(e){h===p.DEFINE?require(["localforageSerializer"],e):e(h===p.EXPORT?require("./../utils/serializer"):f.localforageSerializer)}),i=new c(function(r,o){try{n.db=v(n.name,String(n.version),n.description,n.size)}catch(i){return t.setDriver(t.LOCALSTORAGE).then(function(){return t._initStorage(e)}).then(r)["catch"](o)}n.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,r()},function(e,t){o(t)})})});return o.then(function(e){return d=e,i})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new c(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=d.deserialize(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return s(r,t),r}function n(e,t){var n=this,r=new c(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var o=r.rows,i=o.length,a=0;i>a;a++){var u=o.item(a),l=u.value;if(l&&(l=d.deserialize(l)),l=e(l,u.key,a+1),void 0!==l)return void t(l)}t()},function(e,t){r(t)})})})["catch"](r)});return s(r,t),r}function r(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new c(function(n,o){r.ready().then(function(){void 0===t&&(t=null);var i=t;d.serialize(t,function(t,a){if(a)o(a);else{var u=r._dbInfo;u.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(i)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})}})})["catch"](o)});return s(o,n),o}function o(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new c(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return s(r,t),r}function i(e){var t=this,n=new c(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return s(n,e),n}function a(e){var t=this,n=new c(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return s(n,e),n}function u(e,t){var n=this,r=new c(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return s(r,t),r}function l(e){var t=this,n=new c(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return s(n,e),n}function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var c="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,f=this,d=null,v=this.openDatabase;if(v){var p={DEFINE:1,EXPORT:2,WINDOW:3},h=p.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?h=p.EXPORT:"function"==typeof define&&define.amd&&(h=p.DEFINE);var y={_driver:"webSQLStorage",_initStorage:e,iterate:n,getItem:t,setItem:r,removeItem:o,clear:i,length:a,key:u,keys:l};h===p.DEFINE?define("webSQLStorage",function(){return y}):h===p.EXPORT?module.exports=y:this.webSQLStorage=y}}.call(window),function(){"use strict";function e(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function t(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=v(t[n])?t[n].slice():t[n])}return arguments[0]}function n(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t]===e)return!0;return!1}function r(n){this._config=t({},c,n),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var r=0;r<l.length;r++)e(this,l[r]);this.setDriver(this._config.driver)}var o="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?require("promise"):this.Promise,i={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},u=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],l=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],s={DEFINE:1,EXPORT:2,WINDOW:3},c={description:"",driver:u.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},f=s.WINDOW;"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require?f=s.EXPORT:"function"==typeof define&&define.amd&&(f=s.DEFINE);var d=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[a.WEBSQL]=!!e.openDatabase,n[a.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[a.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=this;r.prototype.INDEXEDDB=a.INDEXEDDB,r.prototype.LOCALSTORAGE=a.LOCALSTORAGE,r.prototype.WEBSQL=a.WEBSQL,r.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},r.prototype.defineDriver=function(e,t,r){var a=new o(function(t,r){try{var a=e._driver,u=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),s=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(u);if(n(e._driver))return void r(s);for(var c=l.concat("_initStorage"),f=0;f<c.length;f++){var v=c[f];if(!v||!e[v]||"function"!=typeof e[v])return void r(u)}var p=o.resolve(!0);"_support"in e&&(p=e._support&&"function"==typeof e._support?e._support():o.resolve(!!e._support)),p.then(function(n){d[a]=n,i[a]=e,t()},r)}catch(h){r(h)}});return a.then(t,r),a},r.prototype.driver=function(){return this._driver||null},r.prototype.ready=function(e){var t=this,n=new o(function(e,n){t._driverSet.then(function(){null===t._ready&&(t._ready=t._initStorage(t._config)),t._ready.then(e,n)})["catch"](n)});return n.then(e,e),n},r.prototype.setDriver=function(e,t,r){function a(){u._config.driver=u.driver()}var u=this;return"string"==typeof e&&(e=[e]),this._driverSet=new o(function(t,r){var a=u._getFirstSupportedDriver(e),l=new Error("No available storage method found.");if(!a)return u._driverSet=o.reject(l),void r(l);if(u._dbInfo=null,u._ready=null,n(a)){var c=new o(function(e){if(f===s.DEFINE)require([a],e);else if(f===s.EXPORT)switch(a){case u.INDEXEDDB:e(require("./drivers/indexeddb"));break;case u.LOCALSTORAGE:e(require("./drivers/localstorage"));break;case u.WEBSQL:e(require("./drivers/websql"))}else e(p[a])});c.then(function(e){u._extend(e),t()})}else i[a]?(u._extend(i[a]),t()):(u._driverSet=o.reject(l),r(l))}),this._driverSet.then(a,a),this._driverSet.then(t,r),this._driverSet},r.prototype.supports=function(e){return!!d[e]},r.prototype._extend=function(e){t(this,e)},r.prototype._getFirstSupportedDriver=function(e){if(e&&v(e))for(var t=0;t<e.length;t++){var n=e[t];if(this.supports(n))return n}return null},r.prototype.createInstance=function(e){return new r(e)};var h=new r;f===s.DEFINE?define("localforage",function(){return h}):f===s.EXPORT?module.exports=h:this.localforage=h}.call(window);var FRONT_VERSION="0.9.0",Time={elapsed:0,delta:0,m_last:-1,update:function(e){e*=.001,this.m_last<0&&(this.m_last=e),this.delta=Math.max(.01,e-this.m_last),this.m_last=e,this.elapsed+=this.delta}},Activity={hasReqAnimFrame:!1,hasPerfTime:!1,RAFId:-1,itvId:-1,m_step_clock:-1,m_raf_offset:0,m_itv_offset:0,m_list:[],m_perf_offset:0,init:function(){window.Activity=Activity,window.Time=Time;var e=Activity;Date.now||(Date.now=function(){return(new Date).getTime()}),e.hasReqAnimFrame=null!=window.requestAnimationFrame,e.hasPerfTime=null!=window.performance,Activity.start()},start:function(){var e=Activity;e.stop(),e.m_step_clock=-1,e.m_itv_offset_clock=e.hasPerfTime?window.performance.now():Date.now(),e.itvId=window.setInterval(e.itvLoop,16),e.m_raf_offset_clock=e.hasPerfTime?window.performance.now():0,e.hasReqAnimFrame&&(e.RAFId=window.requestAnimationFrame(e.rafLoop))},stop:function(){var e=Activity;e.cancelItv(),e.hasReqAnimFrame&&e.cancelRAF()},clear:function(){var e=Activity;e.m_list=[]},add:function(e,t){var n=Activity;n.m_list.indexOf(e)>=0||(e.runOnBackground=null!=t?t:!0,n.m_list.push(e))},remove:function(e){var t=Activity,n=t.m_list.indexOf(e);if(0>n)return null;var r=t.m_list.splice(n,1);return r},run:function(e,t,n,r){var o={};return o.progress=0,o.duration=null!=t?t:16777215,o.elapsed=null!=n?-n:0,o.update=function(){return o.elapsed>=0&&e(o),o.elapsed=Math.min(o.duration,o.elapsed+Time.delta),o.progress=Math.min(1,o.duration<=0?1:o.elapsed/o.duration),o.elapsed>=o.duration?(e(o),void Activity.remove(o)):void 0},Activity.add(o,r),o},delay:function(e,t,n,r){var o=null==r?[]:r;return Activity.run(function(){e.apply(window,o)},0,t?t:0,n)},set:function(e,t,n,r,o){return Activity.run(function(){e[t]=n},0,null==r?0:r,o)},iterate:function(e,t,n,r,o){var i=0,a=null==n?1:n,u=null!=r?r:16777215;return Activity.run(function(n){for(var r=0;a>r;r++){if(i>=t.length){Activity.remove(n);break}e(t[i],i,t.length),i++}},u,0,o)},step:function(e,t){var n=Activity;n.m_step_clock<0&&(n.m_step_clock=e);var r=e,o=Math.max(1,r-n.m_step_clock);n.m_step_clock=r;for(var i=t?1:Math.min(62,Math.max(1,Math.floor(o/16))),a=0;i>a;a++){Time.update(r);for(var u=0;u<n.m_list.length;u++){var l=t?!0:n.m_list[u].runOnBackground;l&&n.m_list[u].update()}n.hasPerfTime||(r+=1e3/60)}},rafLoop:function(e){var t=Activity;t.RAFId=window.requestAnimationFrame(t.rafLoop);var n=t.hasPerfTime?window.performance.now():e;return t.step(n-t.m_raf_offset_clock,!0),!0},itvLoop:function(){var e=Activity,t=null!=document.visibilityState?"hidden"!=document.visibilityState:!0;if(!e.hasReqAnimFrame||!t){var n=e.hasPerfTime?window.performance.now():Date.now();e.step(n-e.m_itv_offset_clock,t)}},cancelRAF:function(){var e=Activity;e.RAFId>=0&&window.cancelAnimationFrame(e.RAFId),e.RAFId=-1},cancelItv:function(){var e=Activity;e.itvId>=0&&window.clearInterval(e.itvId),e.itvId=-1}};Activity.init();var Animation={m_list:[],init:function(){window.Animation=Animation},add:function(e,t,n,r,o,i,a){var u=Activity,l=null==i?function(e){return e}:i,s=null==o?0:o,c=null==r?.3:r,f=!1,d=!1,v=null,p=Animation.m_list,h="string"==typeof e[t],y=("number"==typeof e[t],"object"==typeof e[t],h?n+"":n),g="",m=!1,b={r:0,g:0,b:0};if(h){var w=y.toLowerCase();if(g=w.indexOf("px")>=0?"px":w.indexOf("%")>=0?"%":"",m=w.indexOf("rgb")>=0?!0:!1,!m&&w.indexOf("#")>=0){w=w.replace("#","");var _=parseInt(w.length>=6?w.substr(0,2):w.substr(0,1)+w.substr(0,1),16),I=parseInt(w.length>=6?w.substr(2,2):w.substr(1,1)+w.substr(1,1),16),A=parseInt(w.length>=6?w.substr(4,2):w.substr(2,1)+w.substr(2,1),16);y="rgb("+_+","+I+","+A+")",m=!0}}var S=u.run(function(n){f||(Animation.clear(e,t,[n]),v=e[t],h&&(m?(""==v&&(v="rgb(255,255,255)"),v=v.replace("rgb","").replace("(","").replace(")","").split(","),y=y.replace("rgb","").replace("(","").replace(")","").split(","),v={r:parseInt(v[0]),g:parseInt(v[1]),b:parseInt(v[2])},y={r:parseInt(y[0]),g:parseInt(y[1]),b:parseInt(y[2])}):(""==v&&(v="opacity"==t?"1.0":"0.0"),v=v.replace(g,""),v=""==g?parseFloat(v):parseInt(v),y=y.replace(g,""),y=""==g?parseFloat(y):parseInt(y))),f=!0);var r=null;if(h)if(m)b.r=Math.floor(v.r+(y.r-v.r)*l(n.progress)),b.g=Math.floor(v.g+(y.g-v.g)*l(n.progress)),b.b=Math.floor(v.b+(y.b-v.b)*l(n.progress)),r="rgb("+b.r+","+b.g+","+b.b+")";else{var o=v+(y-v)*l(n.progress);""!=g&&(o=Math.floor(o)),r=o+""+g}else r=v+(y-v)*l(n.progress);if(e[t]=r,n.progress>=1&&!d){null!=n.OnComplete&&n.OnComplete(),d=!0;var i=p.indexOf(n);i>=0&&p.splice(i,1)}},c,s,a);return S.target=e,S.property=t,S.value=n,p.push(S),S},clear:function(e,t,n){var r=Animation.m_list,o=null==n?[]:n;t=null==t?"":t;for(var i=0;i<r.length;i++){var a=null==e?!0:r[i].target==e;if(a){var u=r[i].property==t||""==t;u&&o.indexOf(r[i])<0&&(Activity.remove(r[i]),r.splice(i--,1))}}}};Animation.init();var Front={ref:null,model:{is:function(e,t){var n=Front,r=this;return"string"==typeof e?null!=r.get(e):t?null!=r.context(e):""!=n.attribute(e,"model")},context:function(e){var t=Front,n=this,r=e;for("string"==typeof e&&(r=n.get(e));null!=r;){var o=t.attribute(r,"model");if(""!=o)return r;r=r.parentNode}return null},watch:function(e,t){var n=Front,r=n.find("model",e);null!=r&&(r.watch=null==t?!0:t)},get:function(e){var t=Front;return t.find("model",e)},data:function(e,t){var n=Front,r=this;if(null!=t){var o=r.get(e);if(null==o)return;for(var i in t){var a=n.find("view",i,o);r.value(a,t[i])}return t}var u={};return n.traverse(n.root,function(t){if(null!=t){var o=t.getAttribute("model");null!=o&&o==e&&n.traverse(t,function(e){if(e!=t){var n=e.getAttribute("view");if(null!=n){var o=e.nodeName.toLowerCase();if(null!=o&&"#text"!=o){var i=("input"==o?null==e.type?"":e.type.toLowerCase():"",r.value(e));u[n]=i}}}})}}),u},value:function(e,t){var n=Front,r=e;if("string"==typeof r&&(r=n.view.get(r),null==r))return null;var o=r.nodeName.toLowerCase();if(null==o)return t;if("#text"==o)return t;var i="input"==o?null==r.type?"":r.type.toLowerCase():"";switch(o){case"input":switch(i){case"checkbox":return null==t?r.checked:r.checked=t;default:return null==t?r.value:r.value=t}break;case"select":return null==t?r.selectedIndex:r.selectedIndex=t;case"textarea":return null==t?r.value:r.value=t;default:return null==t?r.textContent:r.textContent=t}return t},onevent:function(e,t){for(var n=Front,r=this,o=t;null!=o;){var i=n.attribute(o,"model");if(""!=i&&null!=i&&null!=o.watch&&o.watch){var a=r.data(i);n.controller.dispatch("model",o,a)}o=o.parentNode}},attribute:function(e){return Front.attribute(e,"model")},storage:{get:function(e,t,n){var r=Front,o=r.controller,i=t,a=n;r.storage.get(e,function(e,t){null!=t?o.notify(i+".error","storage.get",r.model,t):o.notify(i+".get","storage",r.model,null==a?e:[e,a])})},set:function(e,t,n,r){var o=Front,i=o.controller,a=n,u=r;o.storage.set(e,t,function(e,t){null!=t?i.notify(a+".error","storage.set",o.model,t):i.notify(a+".set","storage",o.model,null==u?e:[e,u])})},remove:function(e,t,n){var r=Front,o=r.controller,i=t,a=n;r.storage.remove(e,function(e,t){null!=t?o.notify(i+".error","storage.remove",r.model,t):o.notify(i+".remove","storage",r.model,null==a?e:[e,a])
})},key:function(e,t,n){var r=Front,o=r.controller,i=t,a=n;r.storage.key(p_key,function(e,t){null!=t?o.notify(i+".error","storage.key",r.model,t):o.notify(i+".key","storage",r.model,null==a?e:[e,a])})},keys:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.keys(function(e,t){null!=t?r.notify(o+".error","storage.keys",n.model,t):r.notify(o+".keys","storage",n.model,null==i?e:[e,i])})},clear:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.clear(function(e,t){null!=t?r.notify(o+".error","storage.count",n.model,t):r.notify(o+".count","storage",n.model,null==i?e:[e,i])})},length:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.length(function(e,t){null!=t?r.notify(o+".error","storage.length",n.model,t):r.notify(o+".length","storage",n.model,null==i?e:[e,i])})},destroy:function(e,t){var n=Front,r=n.controller,o=e,i=t;n.storage.length(function(e){null!=e?r.notify(o+".error","storage.length",n.model,e):r.notify(o+".length","storage",n.model,i)})}}},controller:{list:[],add:function(e,t){var n=this,r=e;return n.list.indexOf(r)<0&&n.list.push(r),r.route=null==r.route?null==t?/(.*?)/:t:r.route,null==r.allow&&(r.allow=""),r},remove:function(e){var t=this,n=e,r=t.list.indexOf(n);return r>=0?(t.list.splice(r,1),n):null},exists:function(e){var t=this;return null!=t.find(e)},find:function(e){for(var t=this,n=0;n<t.list.length;n++)if(null!=t.list[n].name&&t.list[n].name==e)return t.list[n];return null},dispatch:function(e,t,n){var r=Front,o=this,i=r.view.path(t,!0);o.notify(i,e,t,n),"input,change,update".indexOf(e)>=0&&r.traverse(r.root,function(e){var t=r.attribute(e,"bind");if(""!=t){var n=t.split("."),o=n.pop(),i=n.join(".");if(r.model.is(i)){var a=r.model.data(i);null!=a[o]&&r.model.value(e,a[o])}}})},notify:function(e,t,n,r){for(var o=this,i=0;i<o.list.length;i++){var a=o.list[i];if(null!=a.on){if(null!=a.allow&&""!=a.allow&&a.allow.indexOf(t)<0)continue;if(""!=e&&!a.route.test(e))continue;a.on(e,t,n,r)}}},request:{service:"",create:function(e,t,n,r,o,i){var a=null==i?"get":i,u=null==o?!1:o,l=Front.controller,s=Front,c={};if(c.path=t,c.event=null==n?"":n,c.data=null==r?{}:r,"get"==a){var f="?notification="+JSON.stringify(c);e+=f}var d=s.request.create(e,function(n,r,o,i){if(0>=r&&l.notify(t+".upload","progress",o,1+r),r>=0&&1>=r&&l.notify(t+".progress","progress",o,r),r>=1)if(null==n)l.notify(t+".error","error",o,i);else if(l.notify(t+".complete","complete",o,o.response),!u){var a=JSON.parse(o.response);if(null==a)return void console.error("Controller> Service ["+e+"] returned a wrong notification list.");for(var s=0;s<a.length;s++){var c=a[s];null==c.path?console.error("Controller> Service ["+e+"] returned a wrong notification format."):(c.event=null==c.event?"":c.event,c.data=null==c.data?{}:c.data,l.notify(c.path,c.event,o,c.data))}}},JSON.stringify(c),u,a);return d},get:function(e,t,n,r,o){var i=this;return i.create(e,t,n,r,o,"get")},post:function(e,t,n,r,o){var i=this;return i.create(e,t,n,r,o,"post")},notify:function(e,t,n,r,o){var i=this,a=null==o?"post":o;return i.create(i.service,e,t,n,r,a)}},clear:function(){var e=this;e.list=[]}},view:{is:function(e,t){var n=Front,r=this;return"string"==typeof e?null!=r.get(e):t?null!=r.context(e):""!=n.attribute(e,"view")},context:function(e){for(var t=Front,n=e;null!=n;){var r=t.attribute(n,"view");if(""!=r)return n;n=n.parentNode}return null},path:function(e,t){var n=[],r="",o=null==t?!1:t,i=e;if(r=null!=i.getAttribute?i.getAttribute("view"):"",!o){if(null==r)return"";if(""==r)return""}for(null!=r&&""!=r&&n.push(r),i=i.parentNode;null!=i;)r=null!=i.getAttribute?i.getAttribute("view"):"",null!=r&&""!=r&&n.push(r),i=i.parentNode;return n.reverse(),n.join(".")},get:function(e){if(null==e)return null;var t=Front,n=e.split(".");if(n.length<=0)return null;n.reverse();var r=null;return t.traverse(t.root,function(e){if(n.length<=0)return!1;var o=t.attribute(e,"view");if(""!=o)return o==n[n.length-1]&&n.pop(),n.length<=0?(r=e,!1):void 0}),r},find:function(e,t){var n=null==t?!1:t,r=Front,o=n?[]:null;return r.traverse(r.root,function(t){var i=r.attribute(t,"view");if(""!=i&&i==e){if(!n){if(null==o)return o=t,!1;if(null!=o)return!1}o.push(t)}}),o},clone:function(e){var t=this,n=null;if("string"==typeof e){var r=t.get(e);if(null==r)return null;if(null==r.getAttribute)return null;if(null==r.getAttribute("template"))return null;n=r}else n=e;return n=n.cloneNode(!0),n.removeAttribute("template"),n},parent:function(e){var t=this;if(null==e)return null;if("string"==typeof e){var n=p_path.split(".");n.pop();var r=n.join(".");return t.get(r)}for(var o=e.parentNode;null!=o;){if(Front.view.is(o))return o;o=o.parentNode}return null},attribute:function(e){return Front.attribute(e,"view")},query:function(e,t){var n=null==t?Front.root:t;return null==n?[]:n.querySelectorAll(e)}},observer:null,mutations:[],events:["click","input","change"],root:null,enabled:!0,setRoot:function(e){if(null!=ref.root){for(var t=0;t<ref.events.length;t++)ref.listen(ref.events[t],!1);null!=ref.observer&&ref.observer.disconnect()}if(ref.root=e,null!=ref.root){for(var t=0;t<ref.events.length;t++)ref.listen(ref.events[t],!0);var n={attributes:!0,childList:!0,characterData:!0,subtree:!0};null!=ref.observer&&ref.observer.observe(ref.root,n);var r=document.styleSheets[0];r.insertRule("*[template] { display: none !important; }",1)}},listen:function(e,t){if(null!=ref.root){var n=ref.root,r=t?n.addEventListener:n.removeEventListener,o="focus,blur".indexOf(e)>=0&&t;o&&r(e,ref.onevent,!0),r(e,ref.onevent)}},onevent:function(e){if(ref.enabled){var t=e.target,n=e.type;switch(n){case"change":case"input":ref.model.onevent(n,t)}ref.controller.dispatch(n,t,e)}},initialize:function(e,t,n){ref=this,ref.events=null==t?ref.events:t,ref.root=e;var r=null==n?!1:n;r&&(null==MutationObserver?console.warn("FrontJS> MutationObserver class not found."):ref.observer=new MutationObserver(ref.onmutation)),null==ref.root&&(null==document.body?window.addEventListener("load",ref.onload):ref.root=document.body),null!=ref.root&&(console.log("FrontJS> Initialize ["+ref.root+"]"),ref.setRoot(ref.root))},onload:function(){window.removeEventListener("load",ref.onload),null==ref.root&&(ref.root=document.body,console.log("FrontJS> Initialize ["+ref.root+"]"),ref.setRoot(ref.root))},attribute:function(e,t){if(null==e)return"";if(null==e.getAttribute)return"";var n=e.getAttribute(t);return null==n?"":n},find:function(e,t,n){var r=null,o=null==n?ref.root:n;return ref.traverse(o,function(n){if(null!=r)return!1;if(null!=n.getAttribute){var o=n.getAttribute(e);if(null!=o&&""!=o)return null==t?(r=n,!1):""==t?(r=n,!1):o==t?(r=n,!1):void 0}}),r},query:function(e){return document.querySelectorAll(e)},onmutation:function(e){if(ref.enabled){ref.mutations=e;for(var t=0;t<ref.mutations.length;t++){var n=ref.mutations[t].target;ref.model.onevent("update",n)}ref.controller.dispatch("update",document.body)}},traverse:function(e,t){var n=null;if(n=t(e),0!=n)for(var r=e.children,o=0;o<r.length;o++)ref.traverse(r[o],t)},request:{create:function(e,t,n,r,o){var i=null==o?"get":o,a=null==r?!1:r,u=new XMLHttpRequest;return a&&(null!=u.overrideMimeType&&u.overrideMimeType("application/octet-stream"),u.responseType="arraybuffer"),u.onprogress=function(e){var n=.9999*(e.total<=0?0:e.loaded/(e.total+5));null!=t&&t(null,n,u)},u.upload.onprogress=function(e){if(null!=n){var r=.9999*(e.total<=0?0:e.loaded/(e.total+5));null!=t&&t(null,-(1-r),u)}},u.onload=function(){null!=t&&t(u.response,1,u)},u.onerror=function(e){null!=t&&t(null,1,u,e)},u.open(i,e,!0),null!=n?u.send(n):u.send(),u},get:function(e,t,n,r){var o=this,i=n;if(null!=i){var a="?",u=[];for(var l in i)u.push(l+"="+i[l]);for(var s=0;s<u.length;s++)a+=u[s],s<u.length-1&&(a+="&");e+=a}return o.create(e,t,null,r,"get")},post:function(e,t,n,r){var o=this;return o.create(e,t,n,r,"post")}},storage:{context:"fjs",database:"frontjs",init:function(e){var t=this;null!=e&&(t.database=e),localforage.config({driver:localforage.INDEXEDDB,name:t.database})},get:function(e,t){var n=this,r=""==n.context?"":n.context+".";localforage.getItem(r+e,function(e,n){null!=e&&(n=null),null!=t&&t(n,e)})},set:function(e,t,n){var r=this,o=""==r.context?"":r.context+".";return localforage.setItem(o+e,t,function(e,t){null!=n&&n(t,e)}),t},remove:function(e,t){var n=this,r=""==n.context?"":n.context+".";localforage.removeItem(r+e,function(e,n){null!=t&&t(n,e)})},key:function(e,t){var n=this;localforage.key(e,function(e,r){null!=e&&(r=""),""!=n.context&&(r=r.replace(n.context+".","")),null!=t&&t(r,e)})},keys:function(e){var t=this;localforage.keys(function(n,r){null!=n&&(r=[]);var o=[];if(""!=t.context)for(var i=0;i<r.length;i++)0==r[i].indexOf(t.context)&&o.push(r[i].replace(t.context+".",""));else o=r;null!=e&&e(o,n)})},clear:function(e){var t=this;t.keys(function(n,r){for(var o=n.length,i=o;n.length>0;)t.remove(n.pop(),function(){i--,0>=i&&null!=e&&e(o,r)})})},length:function(e){var t=this;t.keys(function(t,n){var r=null==n?t.length:0;null!=e&&e(r,n)})},iterate:function(e){localforage.iterate(function(t,n,r){var o=null;return null!=e&&(o=e(n,t,r)),null!=o?o:void 0},function(){null!=e&&e(k,v,-1)})},destroy:function(e){localforage.clear(function(t){null!=e&&e(t)})}},activity:Activity,animation:Animation};